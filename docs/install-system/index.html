<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Install system - Minutiae</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="https://sarahfeichtinger.github.io/minutiae-website/favicon.png">

  
  
  <link rel="stylesheet" href="/minutiae-website/css/style.min.e3a14b20a8571963376d68d7dd9f39d3ba6dce11fbfe0d97eab10ab23cd6c498.css">
  

  

</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/minutiae-website/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/minutiae-website/docs/">
        <span>Docs</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="https://sarahfeichtinger.github.io/minutiae-website/"><img alt="Logo" src="/minutiae-website/images/logo.svg" /></a>
    </div>
    <div class="logo-mobile">
      <a href="https://sarahfeichtinger.github.io/minutiae-website/"><img alt="Logo" src="/minutiae-website/images/logo.svg" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="/minutiae-website/">
        <span>Home</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="/minutiae-website/docs/">
        <span>Docs</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>


    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            
<div class="docs-menu">
  <h4>Docs</h4>
  <ul>
    
    <li class="active ">
      <a href="https://sarahfeichtinger.github.io/minutiae-website/docs/install-system/">Install system</a>
    </li>
    
    <li class="">
      <a href="https://sarahfeichtinger.github.io/minutiae-website/docs/update-system/">Update system</a>
    </li>
    
    <li class="">
      <a href="https://sarahfeichtinger.github.io/minutiae-website/docs/file-download/">Download files</a>
    </li>
    
  </ul>
</div>

          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title">Install system</h1>
<div class="content ">
  <p>The installation just includes the first raspberry, for adding more doors please follow the <a href="./../update-system">update system</a> instructions</p>
<h2 id="set-up-raspberry-pi">Set up raspberry pi</h2>
<h3 id="download-os">Download OS</h3>
<ul>
<li>Download and install <a href="https://www.raspberrypi.com/software/">Raspberry Pi Imager</a> to a computer with an SD card reader.</li>
<li>Put the SD card you&rsquo;ll use with your Raspberry Pi into the reader and run Raspberry Pi Imager.
You will have to choose of some different OS Images.
We recommend using raspbian lite (which has no GUI)</li>
<li>Repeat this step for each door raspberries</li>
</ul>
<h3 id="configuration">Configuration</h3>
<ul>
<li>
<p>Insert SD Card, Monitor and Keyboard into Raspberry</p>
</li>
<li>
<p>The standard username for raspbian lite is <code>pi</code> and the password <code>raspberry</code>. Since the keyboard layout is english on default, you&rsquo;ll have to type <code>raspberrz</code>
if you are using a german keyboard</p>
</li>
<li>
<p>change the keyboard layout (if necessary):</p>
<ul>
<li><code>sudo raspi-config</code> (the minus is on the &lsquo;ÃŸ&rsquo; key) -&gt; &ldquo;Localisation Options&rdquo; -&gt; &ldquo;Change Keyboard Layout&rdquo; -&gt; pick the keyboard model you are using -&gt; select the keyboard layout (if you select &ldquo;other&rdquo; you&rsquo;ll find other options than english ones)</li>
</ul>
</li>
<li>
<p>Change the password</p>
<ul>
<li><code>passwd</code></li>
</ul>
</li>
</ul>
<h2 id="hardware">Hardware</h2>
<p>For the hardware set up we relegate to <a href="https://github.com/ElektronikNode/fp-server">another project</a>.<br>
We suggest doing the hardware setup on a table first and install the system on your door when you installed everything.
Consider that you have to know the Raspberries future IP address for this, you can solve this with using static ips instead of dynamic ones. We recommend using static ips anyways.</p>
<h2 id="download-files">Download files</h2>
<ul>
<li>For the first door you can download the files from our <a href="./../file-download/">download page</a>
<ul>
<li>You&rsquo;ll get 2 Zip folders, extract them and put all the contained files on an usb stick into a folder called <code>newcluster</code></li>
</ul>
</li>
<li>When using this page, you&rsquo;ll have to insert an IP address, you can type <code>hostname -I</code> in the raspberries terminal to look it up.</li>
</ul>
<h2 id="mount-usb-stick">Mount usb stick</h2>
<ul>
<li>Insert Stick into Raspberry Pi and put following commands into the terminal:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">sudo mkdir /media/usb
</code></pre></div><p>with <code>sudo blkid -o list -w /dev/null</code> you can get the path, name and fs_type from your stick, it probably is <code>/dev/sda1</code>.</p>
<p>This path/name and fs_type you have to insert into the next command:
<code>sudo mount -t &lt;fs_type&gt; -o utf8,uid=pi,gid=pi /dev/&lt;usb stick name&gt; /media/usb</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">sudo cp /media/usb/&lt;yourPathOnYourStick&gt;/newcluster/ .

sudo umount /media/usb
</code></pre></div><ul>
<li>You can unplug the usb stick now</li>
</ul>
<p>These previous commands are mounting the usb stick and copying the files into the root of your raspberries file system.</p>
<h3 id="remove-login-to-make-kiosk-mode-possible">Remove login to make Kiosk mode possible</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">sudo raspi-config
</code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">-&gt; System Options -&gt; Boot / Auto Login -&gt; B2 Console Autologin
-&gt; Finish -&gt; Reboot: No
</code></pre></div><p>We use the Kiosk Mode as a super full screen mode of the frontend, which otherwise would be a normal tab in the browser.
The operating mode is more difficult to exit than regular full screen mode and protects against setting changes.
Notice, that it works on raspbian lite as a normal (but only) user interface.</p>
<p>Since you still need a password if you change to the terminal, changing the password is still an important thing to do.</p>
<h2 id="run-installation-script">Run installation script</h2>
<p>The installations scripts come with the system and automatically install and set up the database, the frontend, the backend
and the Kiosk Mode.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">cd newcluster
sudo chmod +x ./preinstallation.sh
sudo ./preinstallation.sh
</code></pre></div><p>On this point, the raspberry will automatically do a reboot to make some changes effective.</p>
<hr>
<p>After the reboot put the following commands</p>
<ul>
<li>Instead of <code>your_username</code> and <code>your_password</code> think of a secure password.<br>
<em>Important</em>: Note it somewhere since you&rsquo;ll need it if you want to add more doors later. Also, you should mark your first raspberry somehow,
because you need to know which one was the very first when adding more doors.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">cd newcluster
sudo ./setup.sh your_username your_password
</code></pre></div><h2 id="result">Result</h2>
<p>If everything worked out, you should see the frontend in fullscreen now and everything should work properly.
You can sign in to the frontend with the automatically generated default admin. Please change its password right after.<br>
Username: <code>admin</code><br>
Password: <code>admin</code></p>
<p>If you want to add more doors you can switch to the <a href="./../update-system/">update system</a> instructions.</p>
<h2 id="ssh">SSH</h2>
<p>If you don&rsquo;t always want to carry your keyboard, mouse and screen to each door where a raspberry is installed,
we recommend, to use SSH for remote access.
SSH is automatically enabled during the installation process in the installation scripts.
This works if you are in the same network, if you enable port 22 on your
router, it also works from outside your network, but we don&rsquo;t recommend this for security reasons.</p>
<p>To build a ssh connection to your raspberry, you type <code>ssh &lt;username&gt;@&lt;ipAddress&gt;</code>.
You can get the ipAddress by typing <code>hostname -I</code>. The username is probably pi, if you didn&rsquo;t change it.
Watch out to connect your raspberry to your Network, otherwise <code>hostname -I</code> won&rsquo;t return anything.</p>

</div>

<div>
  
</div>


        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          <ul>
            <li class="zerostatic"><a href="https://github.com/pcode-at/minutiae.git">https://github.com/</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  

  
  

  
  <script type="text/javascript" src="/minutiae-website/js/scripts.min.eaf147370baecdd07c022597db631f99cab1c9cd6479de586f30327a568d6a0f.js"></script>
  
  
  
    
  


</body>

</html>
